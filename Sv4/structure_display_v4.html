<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Sentence Structure Explorer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>

  <link rel="stylesheet" href="structure_display_v4.css">
</head>

<body>
<header class="topbar">
  <div class="leftControls">
    <button class="topIconBtn" id="collapseBtn" disabled title="Collapse workspace" aria-label="Collapse workspace"><svg class="icon" aria-hidden="true"><use href="../icons/panel_hide.svg?#icon"></use></svg></button>
    <button class="topIconBtn" id="storeBtn"    disabled title="Copy for reference" aria-label="Copy for reference"><svg class="icon" aria-hidden="true"><use href="../icons/doc_plus.svg?#icon"  ></use></svg></button>
  </div>
  <div class="titleWrap">
    <span class="titleMain">Sentence Structure Explorer</span>
    <span class="titleSub">— A visual breakdown of sentence structure across authors.</span>
  </div>
  <div class="rightControls">
    <button class="topIconBtn" id="helpBtn"      aria-label="Help"              title="Help and documentation"><svg class="icon" aria-hidden="true"><use href="../icons/manual_help.svg?#icon"></use></svg></button>
    <button class="topIconBtn" id="localDataBtn" aria-label="Local corpus data" title="Local corpus data"><svg class="icon" aria-hidden="true"><use href="../icons/database.svg?#icon"></use></svg></button>
    <button class="topIconBtn" id="settingsBtn"  aria-label="Settings"          title="Settings"         ><svg class="icon" aria-hidden="true"><use href="../icons/settings.svg?#icon"></use></svg></button>
  </div>
</header>

<main class="workspaces" id="workspaces">
  <div class="workspaceWrap" id="workspaceWrap">
    <section class="workspace" id="workspace">
      <div id="excerptSelector">
        <div class="row-1">
          <div class="work-details" id="workDetails">
            <div class="workDetailsContent" id="workDetailsContent">
              <div class="work"></div>
              <div class="author"></div>
              <div class="choice"></div>
            </div>
            <div class="filterPanel hidden" id="filterPanel">
              <div class="filterTitle">Filter remote corpus</div>
              <select class="filterSelect" id="corpusFilterSelect" size="10" aria-label="Remote corpus filter"></select>
            </div>
          </div>
          <div class="listBlock">
            <div class="corpusSwitch" aria-label="Corpus switch">
              <button class="iconBtn" id="corpusFilterBtn" title="Filter remote corpus" aria-label="Filter remote corpus" disabled>
                <svg class="icon" aria-hidden="true"><use href="../icons/filter.svg?#icon"></use></svg>
              </button>
              <button class="iconBtn listSelectBtn" id="corpusRemoteBtn" disabled title="Remote corpus">
                <svg class="icon" aria-hidden="true"><use href="../icons/world_network.svg?#icon"></use></svg>
              </button>
              <button class="iconBtn listSelectBtn" id="corpusLocalBtn" title="Local corpus">
                <svg class="icon" aria-hidden="true"><use href="../icons/hard-drive.svg?#icon"></use></svg>
              </button>
            </div>
            <select class="work-list" id="workListRemote" size="4"></select>
            <select class="work-list hidden" id="workListLocal" size="4"></select>
          </div>
        </div>
      </div>
      <div id="explorerArea">
        <div class="row-2">
          <div class="comment" id="commentArea"></div>
          <button id="excerptSourceBtn" title="Open raw / excerpt panel"><svg class="icon" aria-hidden="true"><use href="../icons/dive-in_doc.svg?#icon"></use></svg></button>
        </div>
      <div class="sentence" id="sentenceArea"></div>
    </div>
      <div class="result-panel" id="resultPanel"></div>
      <div class="dynResult" id="dynResult"></div>
      <div class="deconstruct-panel" id="deconstructPanel">
        <div class="deconstruct-header">
          <div class="deconstruct-title">Deconstruction</div>
          <div class="deconstruct-status" id="deconstructStatus"></div>
        </div>
        <div class="deconstruct-controls">
          <button class="hoverBtn" id="deconstructResetBtn" type="button">Reset all clauses</button>
          <button class="hoverBtn" id="deconstructCollapseBtn" type="button">Collapse all clauses</button>
          <button class="hoverBtn" id="deconstructKeepDCBtn" type="button">Keep only DCs</button>
          <button class="hoverBtn" id="deconstructCopyBtn" type="button">Copy text</button>
        </div>
        <div class="deconstruct-body">Partially implemented</div>
      </div>
    </section>
  </div>
</main>

<!-- Excerpt source panel -->
<div class="modal-backdrop" id="excerptSourcePnl">
  <div class="modal">
    <div class="modal-header">
      <div class="modalHeaderLeft">
        <button id="toggleView" style="width:200px; white-space: nowrap;" class="hoverBtn">Switch to original excerpt</button>
        <button id="copyClipboardBtn" style="width:200px; white-space: nowrap;" class="hoverBtn">Copy to clipboard</button>
        <button id="cloneLocalBtn" class="hoverBtn">Clone to local corpus</button>
      </div>
      <button id="excerptSourceClose" class="hoverBtn">×</button>
    </div>
    <div class="modal-content mono" id="excerptSourceContent"></div>
  </div>
</div>

<!-- Parameter modal -->
<div class="modal-backdrop" id="paramModal">
  <div class="modal param-modal">
    <div class="modal-header">
      <div class="param-title">Parameters</div>
      <button id="closeParam" class="hoverBtn">×</button>
    </div>

    <div class="param-body">
      <div class="param-row">
        <div>Word cap:</div>
        <input id="pWordCap" type="number" min="0"/>
      </div>

      <div class="param-row">
        <div>Bar height:</div>
        <input id="pBarHeight" type="number" min="1"/>
      </div>

      <div class="param-row">
        <div>Bg color:</div>
        <input id="pBgColor" type="text"/>
      </div>

      <div class="param-row">
        <div>Display width:</div>
        <input id="pDisplayWidth" type="number" min="0"/>
      </div>
    </div>

    <div class="param-actions">
      <button id="pCancel" class="hoverBtn">Cancel</button>
      <button id="pApply" class="hoverBtn">Validate &amp; process</button>
    </div>
  </div>
</div>

<script src="sse_common.js"></script>
<script src="tag_registry.js"></script>
<script src="svg_render.js"></script>
<script src="deconstruct.js"></script>
<script src="ui_main.js"></script>
</body>
</html>
